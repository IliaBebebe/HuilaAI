(()=>{var e={};e.id=698,e.ids=[698],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},2893:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=s(260),n=s(8203),a=s(5155),i=s.n(a),l=s(7292),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7949)),"C:\\Users\\user\\Desktop\\HuilaAI\\src\\app\\admin\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1354)),"C:\\Users\\user\\Desktop\\HuilaAI\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9937,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\user\\Desktop\\HuilaAI\\src\\app\\admin\\page.tsx"],p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3294:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,3219,23)),Promise.resolve().then(s.t.bind(s,4863,23)),Promise.resolve().then(s.t.bind(s,5155,23)),Promise.resolve().then(s.t.bind(s,9350,23)),Promise.resolve().then(s.t.bind(s,6313,23)),Promise.resolve().then(s.t.bind(s,8530,23)),Promise.resolve().then(s.t.bind(s,8921,23))},3046:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,6959,23)),Promise.resolve().then(s.t.bind(s,3875,23)),Promise.resolve().then(s.t.bind(s,8903,23)),Promise.resolve().then(s.t.bind(s,4178,23)),Promise.resolve().then(s.t.bind(s,6013,23)),Promise.resolve().then(s.t.bind(s,7190,23)),Promise.resolve().then(s.t.bind(s,1365,23))},2685:()=>{},8682:()=>{},7508:(e,t,s)=>{Promise.resolve().then(s.bind(s,7949))},244:(e,t,s)=>{Promise.resolve().then(s.bind(s,6185))},6185:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(5512),n=s(8009),a=s(9131),i=s(3205),l=s(1652);let o=async([e,t])=>{let s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t})});if(!s.ok)throw Error("Неверный пароль");return s.json()};function d(){let[e,t]=(0,n.useState)(""),[s,d]=(0,n.useState)(null),[c,p]=(0,n.useState)(null),[m,u]=(0,n.useState)(""),[x,h]=(0,n.useState)(null),{data:b,mutate:g,isLoading:f}=(0,a.Ay)(s?["/api/admin/conversations",s]:null,o,{refreshInterval:s?4e3:0,shouldRetryOnError:!1}),v=(0,n.useMemo)(()=>b?.conversations??[],[b?.conversations]),y=(0,n.useMemo)(()=>v.find(e=>e.id===c),[v,c]),j=async s=>{s.preventDefault();try{let s=await fetch("/api/admin/conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})});if(!s.ok){let e=await s.json();throw Error(e.error??"Ошибка входа")}d(e),t(""),h(null),await g()}catch(e){h(e instanceof Error?e.message:"Ошибка входа"),d(null)}},w=async()=>{s&&y&&(await fetch("/api/admin/manual",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:s,conversationId:y.id,enabled:!y.manualMode})}),await g())},N=async()=>{s&&y&&m.trim()&&(await fetch("/api/admin/reply",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:s,conversationId:y.id,text:m.trim()})}),u(""),await g())};return s?(0,r.jsxs)("div",{className:"min-h-screen bg-night p-6 md:p-10",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm uppercase tracking-[0.4em] text-accentMuted",children:"Панель"}),(0,r.jsx)("h1",{className:"text-3xl font-semibold",children:"HuilaAI Admin"})]}),(0,r.jsx)("button",{onClick:()=>{d(null),p(null)},className:"text-sm text-gray-400 hover:text-white",children:"Выйти"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[280px_1fr] gap-6",children:[(0,r.jsxs)("div",{className:"glass-panel p-4 overflow-y-auto h-[75vh] space-y-3",children:[f&&(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Загрузка..."}),v.map(e=>(0,r.jsxs)("button",{onClick:()=>p(e.id),className:`w-full text-left px-4 py-3 rounded-2xl border transition ${e.id===c?"border-accent bg-accent/10":"border-transparent bg-white/5"}`,children:[(0,r.jsx)("p",{className:"font-semibold",children:e.name}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleString("ru-RU")}),(0,r.jsxs)("p",{className:"text-xs mt-1 text-gray-500",children:["Сообщений: ",e.messages.length]})]},e.id))]}),(0,r.jsx)("div",{className:"glass-panel p-6 flex flex-col h-[75vh]",children:y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-400 uppercase tracking-[0.4em]",children:"Пользователь"}),(0,r.jsx)("h2",{className:"text-2xl font-semibold",children:y.name})]}),(0,r.jsx)("button",{onClick:w,className:`px-4 py-2 rounded-2xl text-sm font-medium ${y.manualMode?"bg-warning/30 text-warning":"bg-accent/30 text-accent"}`,children:y.manualMode?"Выкл. ручной режим":"Вкл. ручной режим"})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto space-y-4 pr-2",children:(0,r.jsx)(i.N,{initial:!1,children:y.messages.map(e=>(0,r.jsxs)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.25},className:`p-4 rounded-2xl border ${"user"===e.sender?"border-white/10 bg-white/5":"admin"===e.sender?"border-warning/40 bg-warning/10":"border-accent/40 bg-accent/5"}`,children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.4em] text-gray-400 mb-2",children:e.sender}),(0,r.jsx)("p",{className:"whitespace-pre-wrap",children:e.text}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-3",children:new Date(e.createdAt).toLocaleTimeString("ru-RU")})]},e.id))})}),(0,r.jsxs)("div",{className:"border-t border-white/5 mt-4 pt-4",children:[(0,r.jsx)("textarea",{value:m,onChange:e=>u(e.target.value),placeholder:"Напишите ответ, который увидит пользователь...",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-3 min-h-[120px] focus:outline-none focus:ring-2 focus:ring-accent"}),(0,r.jsxs)("div",{className:"flex justify-end mt-3 gap-3",children:[(0,r.jsx)("button",{onClick:()=>u(""),className:"text-sm text-gray-400 hover:text-white",children:"Очистить"}),(0,r.jsx)("button",{onClick:N,disabled:!m.trim(),className:"bg-accent hover:bg-accentMuted disabled:opacity-50 text-white px-5 py-2 rounded-xl transition",children:"Отправить вручную"})]})]})]}):(0,r.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Выберите чат слева"})})]})]}):(0,r.jsx)("div",{className:"min-h-screen bg-night flex items-center justify-center px-4",children:(0,r.jsxs)("form",{onSubmit:j,className:"glass-panel max-w-md w-full p-10 space-y-6",children:[(0,r.jsx)("p",{className:"text-sm uppercase tracking-[0.4em] text-accentMuted text-center",children:"Админ вход"}),(0,r.jsx)("h1",{className:"text-3xl font-semibold text-center",children:"HuilaAI"}),(0,r.jsx)("input",{type:"password",autoFocus:!0,value:e,onChange:e=>t(e.target.value),placeholder:"Пароль",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-accent"}),x&&(0,r.jsx)("p",{className:"text-center text-red-400 text-sm bg-red-400/10 rounded-xl py-2",children:x}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-accent hover:bg-accentMuted text-white py-3 rounded-2xl transition",children:"Войти"})]})})}},7949:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\user\\\\Desktop\\\\HuilaAI\\\\src\\\\app\\\\admin\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\user\\Desktop\\HuilaAI\\src\\app\\admin\\page.tsx","default")},1354:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l,metadata:()=>i});var r=s(2740),n=s(843),a=s.n(n);s(1135);let i={title:"HuilaAI — свободный ИИ-агрегатор",description:"HuilaAI — личный экспериментальный агрегатор нейросетей. Современный чат клиент, ручные ответы, админ панель."};function l({children:e}){return(0,r.jsx)("html",{lang:"ru",children:(0,r.jsxs)("body",{className:`${a().variable} bg-night text-white`,children:[(0,r.jsx)("div",{className:"noise-overlay"}),e]})})}},1135:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[989,86,76],()=>s(2893));module.exports=r})();